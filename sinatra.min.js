/*
* sinatra.js
* https://github.com/websperts/sinatra.js
*
* Copyright (c) 2014 websperts <hello@websperts.com>
* Licensed under the MIT license.
* https://github.com/websperts/sinatra.js/blob/master/LICENSE
*/
(function(d,g){var b=d.sinatra={routes:{},errorCallback:null,placeholders:/(:\w+)/gi,on:function(a,c){"function"===typeof c&&(b.placeholders.test(a)&&(a=a.replace(b.placeholders,function(){return"([^/]+)"})),b.routes[a]=c);return this},off:function(a){a in b.routes&&delete b.routes[a];return this},error:function(a){b.errorCallback=a;return this},change:function(){var a=(d.location.hash||"#").match("^#!?(.*)$");if(a){var c=a[1]||"";0===c.length&&(c="/");console.log(c);for(var e in b.routes)if(a=c.match("^"+
e+"$")){var f=[c];a.shift();a.forEach(function(a){f.push(a)});b.routes[e].apply(this,f);return}"function"===typeof b.errorCallback&&b.errorCallback.apply(this,[c])}},reset:function(){b.routes={}},run:function(){"onhashchange"in d?d.addEventListener?d.addEventListener("hashchange",b.change,!1):d.attachEvent&&d.attachEvent("onhashchange",b.change):d.setInterval(function(){b.change()},100);b.change()}}})(window);
