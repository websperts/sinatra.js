/*

 sinatra.js
 https://github.com/websperts/sinatra.js

 Copyright (c) 2014 websperts <hello@websperts.com>
 Licensed under the MIT license.
 https://github.com/websperts/sinatra.js/blob/master/LICENSE
*/
(function(c,d){"function"===typeof define&&define.amd?define(function(){return d(c)}):c.sinatra=d(c)})(this,function(c,d){var a={routes:{},errorCallback:null,placeholders:/(:\w+)/gi,on:function(b,c){"function"===typeof c&&(a.placeholders.test(b)&&(b=b.replace(a.placeholders,function(){return"([^/]+)"})),a.routes[b]=c);return this},off:function(b){b in a.routes&&delete a.routes[b];return this},error:function(b){a.errorCallback=b;return this},change:function(){var b=(c.location.hash||"#").match("^#!?(.*)$");
if(b){var e=b[1]||"";0===e.length&&(e="/");for(var d in a.routes)if(b=e.match("^"+d+"$")){var f=[e];b.shift();b.forEach(function(a){f.push(a)});a.routes[d].apply(this,f);return}"function"===typeof a.errorCallback&&a.errorCallback.apply(this,[e])}},reset:function(){a.routes={}},run:function(){"onhashchange"in c?c.addEventListener?c.addEventListener("hashchange",a.change,!1):c.attachEvent&&c.attachEvent("onhashchange",a.change):c.setInterval(function(){a.change()},100);a.change()}};return a});
